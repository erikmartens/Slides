
= Meilenstein 03

# Meilenstein 03: Server

# Uebersicht

## Uebersicht

- Beginn heute

## Uebersicht

- Testat ist gemeinsam Meilenstein 3 und 4
- Antritt zum Testat **NUR** mit Pull-Request auf die Boilerplate
- Erfuellung Interface-Spezifikation (15 Punkte je Testat)
- Erfuellung Code-Qualitaet und Fachwissen (15 Punkte je Testat)



= Server

# Server

## Server

- Nutzung von express.js / body-parser / cors Stack
- Nutzung von node.js 7+
- Nutzung von ES6 / ES7



= API Spezifikation

# API Spezifikation

## API Spezifikation

- `Token` header fuer jede Gruppe notwendig
- POST Requests werden nur mit validem `Token` akzeptiert
- API Struktur ist `/api/Pfad/:id`
- GET `/api/Pfad` liefert Array
- GET `/api/Pfad/:id` liefert Objekt
- POST `/api/Pfad/:id` liefert `{message:'OK'}` oder `{message:'NOT OK'}`

## API Regeln

Folgende Regeln gelten fuer alle APIs:

- Wenn `id` gesetzt, dann wird ein vorhandenes Objekt modifiziert
- Wenn `id` nicht gesetzt, wird ein Objekt erstellt
- Wenn `id` nicht gefunden, gibt es einen Fehler

## /api/Status

- `GET` Request liefert Array an Bot Status Objekten
- Datenverwendung fuer Status Tabelle

```javascript
let response = [{
	id: 0,
	ip: '127.0.0.1',
	task: 1,
	workload: 0.0 // 0.0 means inactive, 1.0 means too much to do
}];
```

## /api/Status

- `POST` Request akzeptiert `status` Flag
- Verwendung fuer Toggle Button

```javascript
// enables Bot #0
let data = {
	id: 0,
	status: true
};
```


## /api/Tasks

- `GET` Request liefert Array an Auftrag Objekten
- Verwendung fuer Tasks Tabelle

```javascript
let response = [{
	id: 0,
	type: 'hash-md5',
	data: {
		input: 'woot',
		output: null // Not computed yet, String if computed
	}
}];
```

## /api/Tasks

- `POST` Request akzeptiert Datenobjekt ohne ID
- Verwendung fuer Tasks Formular

```javascript
let data = {
	type: 'hash-md5',
	data: {
		input: 'woot' // output is generated by Bots
	}
};
```

